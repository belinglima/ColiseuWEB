{"ast":null,"code":"import _defineProperty from\"/home/belinglima/MEGAsync/TCC/Projetos/Coliseu/coliseuweb/ColiseuWEB/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/belinglima/MEGAsync/TCC/Projetos/Coliseu/coliseuweb/ColiseuWEB/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/belinglima/MEGAsync/TCC/Projetos/Coliseu/coliseuweb/ColiseuWEB/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/belinglima/MEGAsync/TCC/Projetos/Coliseu/coliseuweb/ColiseuWEB/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/belinglima/MEGAsync/TCC/Projetos/Coliseu/coliseuweb/ColiseuWEB/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/belinglima/MEGAsync/TCC/Projetos/Coliseu/coliseuweb/ColiseuWEB/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/belinglima/MEGAsync/TCC/Projetos/Coliseu/coliseuweb/ColiseuWEB/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/belinglima/MEGAsync/TCC/Projetos/Coliseu/coliseuweb/ColiseuWEB/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import Config from'../tempo';import Menu from'./menu';import api from'../services/api';import{withRouter,Link}from'react-router-dom';import swal from'sweetalert';var Evaluation=/*#__PURE__*/function(_Component){_inherits(Evaluation,_Component);function Evaluation(){var _getPrototypeOf2;var _this;_classCallCheck(this,Evaluation);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Evaluation)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={show:false,loader:true,evaluations:[],users:[],aviso:''};return _this;}_createClass(Evaluation,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var dados,users;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return api.get(\"/auth/evaluation\");case 2:dados=_context.sent;_context.next=5;return api.get('/auth/user');case 5:users=_context.sent;console.log(dados.data);this.setState({evaluations:dados.data,users:users.data});setTimeout(function(){_this2.setState({show:true,loader:false});},Config());case 9:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"deleteEvaluation\",value:function deleteEvaluation(userId){var _swal,_this3=this;swal((_swal={title:\"Você tem certeza?\",text:\"Avaliação será deletada!\",icon:\"warning\",buttons:true},_defineProperty(_swal,\"buttons\",[\"Cancelar\",\"Deletar\"]),_defineProperty(_swal,\"dangerMode\",true),_swal)).then(function(willDelete){if(willDelete){_this3.vay(userId);_this3.setState({msg:'Avaliação deletada com sucesso.'});}});}},{key:\"vay\",value:function(){var _vay=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(userId){var res,dados;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return api.delete(\"/auth/evaluation/\".concat(userId));case 2:res=_context2.sent;if(!res){_context2.next=8;break;}_context2.next=6;return api.get(\"/auth/evaluation\");case 6:dados=_context2.sent;if(dados){this.setState({evaluations:dados.data});}case 8:case\"end\":return _context2.stop();}}},_callee2,this);}));function vay(_x){return _vay.apply(this,arguments);}return vay;}()},{key:\"render\",value:function render(){var _this4=this;return React.createElement(\"div\",null,this.state.loader===true?React.createElement(\"div\",{className:\"container fundo\"},React.createElement(\"div\",{className:\"row loader\"},React.createElement(\"div\",{className:\"col s12 center\"},React.createElement(\"img\",{src:\"../../logo.svg\",width:\"100px\",height:\"100px\"})))):React.createElement(\"div\",null,React.createElement(Menu,null),React.createElement(\"div\",{className:\"orelha\"}),React.createElement(\"div\",{className:\"parallax-container targetTopo\"},React.createElement(\"div\",{className:\"parallax corPadrao\"},React.createElement(\"div\",{className:\"container\"},React.createElement(\"h2\",{style:{color:'#fff'}},\"Avalia\\xE7\\xF5es\")))),React.createElement(\"div\",{className:\"container\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"card-panel\",style:{height:'60px',marginTop:'-30px',borderRadius:'22px'}},React.createElement(\"div\",{className:\"col s6\"},\"Avalia\\xE7\\xE3o\"),React.createElement(\"div\",{className:\"col s6\",style:{marginTop:'-15px'}},React.createElement(Link,{className:\"btn-floating corPadrao right\",to:\"/evaluation\"},React.createElement(\"i\",{className:\"material-icons right\"},\"add\")))),React.createElement(\"div\",{className:\"col s12\"},React.createElement(\"div\",{className:\"card material-table\"},React.createElement(\"div\",{className:\"dataTabless_filter\"},React.createElement(\"label\",null,\"Buscar Avalia\\xE7\\xE3o:\",React.createElement(\"input\",{type:\"search\",id:\"search\",placeholder:\"\",\"aria-controls\":\"datatable\"}))),React.createElement(\"table\",{id:\"datatable\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Cod.\"),React.createElement(\"th\",null,\"usuario\"),React.createElement(\"th\",null,\"Valor\"),React.createElement(\"th\",null,\"A\\xE7\\xE3o\"))),React.createElement(\"tbody\",null,this.state.evaluations.map(function(el){return React.createElement(\"tr\",{key:el.id},React.createElement(\"td\",null,el.id),_this4.state.users.filter(function(user){return el.user_id===user.id;}).map(function(user){return React.createElement(\"td\",{key:user.id},user.name);}),React.createElement(\"td\",null,el.valorPago.toLocaleString('pt-br',{style:'currency',currency:'BRL'})),React.createElement(\"td\",null,React.createElement(\"a\",{onClick:function onClick(){return _this4.deleteEvaluation(el.id);}},React.createElement(\"div\",{className:\"btn-floating corPadrao darken-4\"},React.createElement(\"i\",{className:\"material-icons white-text\"},\"delete\")))));})))))))));}}]);return Evaluation;}(Component);export{Evaluation as default};","map":{"version":3,"sources":["/home/belinglima/MEGAsync/TCC/Projetos/Coliseu/coliseuweb/ColiseuWEB/src/components/evaluations.js"],"names":["React","Component","Config","Menu","api","withRouter","Link","swal","Evaluation","state","show","loader","evaluations","users","aviso","get","dados","console","log","data","setState","setTimeout","userId","title","text","icon","buttons","then","willDelete","vay","msg","delete","res","color","height","marginTop","borderRadius","map","el","id","filter","user","user_id","name","valorPago","toLocaleString","style","currency","deleteEvaluation"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Config from '../tempo'\nimport Menu from './menu';\nimport api from '../services/api'\nimport { withRouter, Link } from 'react-router-dom'\nimport swal from 'sweetalert';\n\nexport default class Evaluation extends Component {\n\n\n    state = {\n        show: false,\n        loader: true,\n\n        evaluations: [],\n        users: [],\n        aviso: '',\n    }\n\n    async componentDidMount() {\n        const dados = await api.get(`/auth/evaluation`)\n        const users = await api.get('/auth/user')\n        console.log(dados.data)\n        this.setState({\n            evaluations: dados.data,\n            users: users.data\n        })\n        \n        setTimeout(() =>{\n            this.setState({ \n                show: true ,\n                loader: false\n            })   \n        }, Config())\n    }\n\n    deleteEvaluation(userId) {\n        swal({\n          title: \"Você tem certeza?\",\n          text: \"Avaliação será deletada!\",\n          icon: \"warning\",\n          buttons: true,\n          buttons: [\"Cancelar\", \"Deletar\"],\n          dangerMode: true,\n        }).then((willDelete) => {\n          if (willDelete) {\n            this.vay(userId)\n            this.setState({\n              msg: 'Avaliação deletada com sucesso.'\n            })\n          } \n        });\n      }\n\n      async vay (userId){\n        const res = await api.delete(`/auth/evaluation/${userId}`);\n        if(res) {\n          const dados = await api.get(`/auth/evaluation`)\n          if(dados) {\n              this.setState({\n                evaluations: dados.data\n              })\n          }       \n        }\n      }\n\n    render(){\n    return (\n    <div>\n        {this.state.loader === true ? \n\n            <div className=\"container fundo\">\n                <div className=\"row loader\">\n                    <div className=\"col s12 center\">\n                        <img src=\"../../logo.svg\" width=\"100px\" height=\"100px\" />\n                    </div>\n                </div>\n            </div>\n            :\n\n            <div>\n                <Menu />\n            <div className=\"orelha\"></div>\n            <div className=\"parallax-container targetTopo\">\n                    <div className=\"parallax corPadrao\">\n                        <div className=\"container\">\n                            <h2 style={{ color: '#fff' }}>Avaliações</h2>\n                        </div>\n                    </div>\n            </div>\n            <div className=\"container\">\n                    <div className=\"row\">\n                        <div className=\"card-panel\" style={{ height: '60px', marginTop: '-30px', borderRadius: '22px' }}>\n                        <div className=\"col s6\">\n                                Avaliação\n                            </div>\n                            <div className=\"col s6\" style={{marginTop: '-15px'}}>\n                                <Link className=\"btn-floating corPadrao right\" to=\"/evaluation\">\n                                    <i className=\"material-icons right\">add</i>\n                                </Link>\n                            </div>\n                        </div>\n                        <div  className=\"col s12\">\n                        <div className=\"card material-table\">     \n                            <div className=\"dataTabless_filter\">\n                                <label>Buscar Avaliação:<input type=\"search\" id=\"search\" placeholder=\"\" aria-controls=\"datatable\" />\n                                </label>\n                            </div>\n                            <table id=\"datatable\">\n                                <thead>\n                                <tr>\n                                    <th>Cod.</th>\n                                    <th>usuario</th>\n                                    <th>Valor</th>\n                                    <th>Ação</th>\n                                </tr>\n                                </thead>\n                                <tbody>\n                                    {this.state.evaluations.map(el => (\n                                        <tr key={el.id}>\n                                            <td>{el.id}</td>\n                                            {this.state.users\n                                            .filter(user => el.user_id === user.id)\n                                            .map(user => (\n                                                <td key={user.id}>{user.name}</td>\n                                            ))}\n                                            <td>{(el.valorPago).toLocaleString('pt-br', {style: 'currency', currency: 'BRL'})}</td>\n                                            <td>\n                                                <a  onClick={() => this.deleteEvaluation(el.id)}>\n                                                    <div className=\"btn-floating corPadrao darken-4\">\n                                                        <i className=\"material-icons white-text\">delete</i>\n                                                    </div>\n                                                </a>\n                                            </td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </table>\n                            </div>                        \n                        </div>\n                    </div>\n                </div>\n        </div>\n    }\n    </div>\n    )\n}}\n\n"]},"metadata":{},"sourceType":"module"}