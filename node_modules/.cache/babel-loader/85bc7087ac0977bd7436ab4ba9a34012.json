{"ast":null,"code":"import _defineProperty from\"/home/belinglima/MEGAsync/TCC/Projetos/Coliseu/coliseuweb/ColiseuWEB/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/belinglima/MEGAsync/TCC/Projetos/Coliseu/coliseuweb/ColiseuWEB/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/belinglima/MEGAsync/TCC/Projetos/Coliseu/coliseuweb/ColiseuWEB/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/belinglima/MEGAsync/TCC/Projetos/Coliseu/coliseuweb/ColiseuWEB/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/belinglima/MEGAsync/TCC/Projetos/Coliseu/coliseuweb/ColiseuWEB/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/belinglima/MEGAsync/TCC/Projetos/Coliseu/coliseuweb/ColiseuWEB/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/belinglima/MEGAsync/TCC/Projetos/Coliseu/coliseuweb/ColiseuWEB/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/belinglima/MEGAsync/TCC/Projetos/Coliseu/coliseuweb/ColiseuWEB/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import api from'../services/api';import{withRouter,Link}from'react-router-dom';import swal from'sweetalert';import Config from'../tempo';import Menu from'./menu';var Users=/*#__PURE__*/function(_Component){_inherits(Users,_Component);function Users(){var _getPrototypeOf2;var _this;_classCallCheck(this,Users);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Users)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={show:false,loader:true,users:[]};return _this;}_createClass(Users,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var id,dados;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:id=localStorage.getItem('@Coliseu');_context.next=3;return api.get(\"/auth/company/\".concat(id));case 3:dados=_context.sent;console.log(dados.data.users);this.setState({users:dados.data.users});setTimeout(function(){this.setState({show:true,loader:false});}.bind(this),Config());case 7:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"vay\",value:function(){var _vay=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(userId){var id,idc,res,dados;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:id=userId;idc=localStorage.getItem('@Coliseu');_context2.next=4;return api.delete(\"/auth/user/\".concat(id));case 4:res=_context2.sent;if(!res){_context2.next=10;break;}_context2.next=8;return api.get(\"/auth/company/\".concat(idc));case 8:dados=_context2.sent;if(dados){this.setState({users:dados.data.users});}case 10:case\"end\":return _context2.stop();}}},_callee2,this);}));function vay(_x){return _vay.apply(this,arguments);}return vay;}()},{key:\"deleteProduct\",value:function deleteProduct(userId){var _swal,_this2=this;swal((_swal={title:\"Você tem certeza?\",text:\"Seu usuário será deletado!\",icon:\"warning\",buttons:true},_defineProperty(_swal,\"buttons\",[\"Cancelar\",\"Deletar\"]),_defineProperty(_swal,\"dangerMode\",true),_swal)).then(function(willDelete){if(willDelete){_this2.vay(userId);_this2.setState({msg:'Usuario deletado com sucesso.'});}});}},{key:\"render\",value:function render(){var _this3=this;var filtro=document.getElementById('search');var tabela=document.getElementById('datatable');if(filtro!=null){filtro.onkeyup=function(){var nomeFiltro=filtro.value;for(var i=1;i<tabela.rows.length;i++){var conteudoCelula=tabela.rows[i].cells[0].innerText;var corresponde=conteudoCelula.indexOf(nomeFiltro)>=0;tabela.rows[i].style.display=corresponde?'':'none';}};}return React.createElement(\"div\",null,this.state.loader===true?React.createElement(\"div\",{className:\"container fundo\"},React.createElement(\"div\",{className:\"row loader\"},React.createElement(\"div\",{className:\"col s12 center\"},React.createElement(\"img\",{src:\"../../logo.svg\",width:\"100px\",height:\"100px\"})))):React.createElement(\"div\",null,React.createElement(Menu,null),React.createElement(\"div\",{className:\"orelha\"}),React.createElement(\"div\",{className:\"parallax-container targetTopo\"},React.createElement(\"div\",{className:\"parallax corPadrao\"},React.createElement(\"div\",{className:\"container\"},React.createElement(\"h2\",{style:{color:'#fff'}},\"Usu\\xE1rios\")))),React.createElement(\"div\",{className:\"container\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"card-panel\",style:{height:'60px',marginTop:'-30px',borderRadius:'22px'}},React.createElement(\"div\",{className:\"col s6\"},\"Usu\\xE1rios\"),React.createElement(\"div\",{className:\"col s6\",style:{marginTop:'-15px'}},React.createElement(Link,{className:\"btn-floating corPadrao right\",to:\"/addUser\"},React.createElement(\"i\",{className:\"material-icons right\"},\"add\")))),React.createElement(\"div\",{className:\"col s12\"},React.createElement(\"div\",{className:\"card material-table\"},React.createElement(\"div\",{className:\"dataTabless_filter\"},React.createElement(\"label\",null,\"Busca de usuarios:\",React.createElement(\"input\",{type:\"search\",id:\"search\",placeholder:\"\",\"aria-controls\":\"datatable\"}))),React.createElement(\"table\",{id:\"datatable\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Nome\"),React.createElement(\"th\",null,\"E-Mail\"),React.createElement(\"th\",null,\"Data Nasc.\"),React.createElement(\"th\",null,\"A\\xE7\\xF5es\"))),React.createElement(\"tbody\",null,this.state.users.map(function(user){return React.createElement(\"tr\",{key:user.id},React.createElement(\"td\",null,user.name),React.createElement(\"td\",null,user.email),React.createElement(\"td\",null,user.birthday.split('-')[2]+'/'+user.birthday.split('-')[1]+'/'+user.birthday.split('-')[0]),React.createElement(\"td\",null,React.createElement(\"a\",{onClick:function onClick(){return _this3.props.history.push(\"/editUser/\".concat(user.id));}},React.createElement(\"div\",{className:\"btn-floating corPadrao darken-4\"},React.createElement(\"i\",{className:\"material-icons white-text\"},\"edit\"))),\"\\xA0\",React.createElement(\"a\",{onClick:function onClick(){return _this3.deleteProduct(user.id,user.name);}},React.createElement(\"div\",{className:\"btn-floating corPadrao darken-4\"},React.createElement(\"i\",{className:\"material-icons white-text\"},\"delete\")))));})))))))));}}]);return Users;}(Component);export default withRouter(Users);","map":{"version":3,"sources":["/home/belinglima/MEGAsync/TCC/Projetos/Coliseu/coliseuweb/ColiseuWEB/src/components/users.js"],"names":["React","Component","api","withRouter","Link","swal","Config","Menu","Users","state","show","loader","users","id","localStorage","getItem","get","dados","console","log","data","setState","setTimeout","bind","userId","idc","delete","res","title","text","icon","buttons","then","willDelete","vay","msg","filtro","document","getElementById","tabela","onkeyup","nomeFiltro","value","i","rows","length","conteudoCelula","cells","innerText","corresponde","indexOf","style","display","color","height","marginTop","borderRadius","map","user","name","email","birthday","split","props","history","push","deleteProduct"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport api from '../services/api'\nimport { withRouter, Link } from 'react-router-dom'\nimport swal from 'sweetalert';\nimport Config from '../tempo'\nimport Menu from './menu';\n\nclass Users extends Component {\n\n\n    state = {\n        show: false,\n        loader: true,\n        users: []\n    }\n\n   async componentDidMount() {\n    const id = localStorage.getItem('@Coliseu')\n    const dados = await api.get(`/auth/company/${id}`)\n    console.log(dados.data.users)\n    this.setState({\n        users: dados.data.users\n    })\n\n        setTimeout(function() {\n            this.setState({ \n                show: true ,\n                loader: false\n            })\n        }.bind(this), Config());\n\n    }\n\n    async vay (userId){\n        const id = userId;\n        const idc = localStorage.getItem('@Coliseu')\n        const res = await api.delete(`/auth/user/${id}`);\n        if(res) {\n          const dados = await api.get(`/auth/company/${idc}`)\n          if(dados) {\n              this.setState({\n                users: dados.data.users\n              })\n          }       \n        }\n      }\n    \n      deleteProduct(userId) {\n        swal({\n          title: \"Você tem certeza?\",\n          text: \"Seu usuário será deletado!\",\n          icon: \"warning\",\n          buttons: true,\n          buttons: [\"Cancelar\", \"Deletar\"],\n          dangerMode: true,\n        }).then((willDelete) => {\n          if (willDelete) {\n            this.vay(userId)\n            this.setState({\n              msg: 'Usuario deletado com sucesso.'\n            })\n          } \n        });\n      }\n\n    render(){\n\n        const filtro = document.getElementById('search');\n        const tabela = document.getElementById('datatable');\n        if (filtro != null){\n            filtro.onkeyup = function() {\n            var nomeFiltro = filtro.value;\n                for (var i = 1; i < tabela.rows.length; i++) {\n                    var conteudoCelula = tabela.rows[i].cells[0].innerText;\n                    var corresponde = conteudoCelula.indexOf(nomeFiltro) >= 0;\n                    tabela.rows[i].style.display = corresponde ? '' : 'none';\n                }\n            };\n        }\n    return (\n    <div>\n        \n        {this.state.loader === true ? \n\n            <div className=\"container fundo\">\n                <div className=\"row loader\">\n                    <div className=\"col s12 center\">\n                        <img src=\"../../logo.svg\" width=\"100px\" height=\"100px\" />\n                    </div>\n                </div>\n            </div>\n            :\n\n            <div>\n                <Menu />\n                <div className=\"orelha\"></div>\n                <div className=\"parallax-container targetTopo\">\n                    <div className=\"parallax corPadrao\">\n                        <div className=\"container\">\n                                {/* <Link to=\"/app\">\n                                    <i className=\"material-icons left medium white-text\">chevron_left</i>\n                                </Link> */}\n                            <h2 style={{ color: '#fff' }}>Usuários</h2>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"container\">\n                    <div className=\"row\">\n                        <div className=\"card-panel\" style={{ height: '60px', marginTop: '-30px', borderRadius: '22px' }}>\n                            <div className=\"col s6\">\n                                Usuários\n                            </div>\n                            <div className=\"col s6\" style={{marginTop: '-15px'}}>\n                                <Link className=\"btn-floating corPadrao right\" to=\"/addUser\">\n                                    <i className=\"material-icons right\">add</i>\n                                </Link>\n                            </div>\n                        </div>\n                        <div  className=\"col s12\">\n                        <div className=\"card material-table\">     \n                            <div className=\"dataTabless_filter\">\n                                <label>Busca de usuarios:<input type=\"search\" id=\"search\" placeholder=\"\" aria-controls=\"datatable\" />\n                                </label>\n                            </div>\n                            <table id=\"datatable\">\n                                <thead>\n                                <tr>\n                                    <th>Nome</th>\n                                    <th>E-Mail</th>\n                                    <th>Data Nasc.</th>\n                                    <th>Ações</th>\n                                </tr>\n                                </thead>\n                                <tbody>\n                                    {this.state.users.map(user => (\n                                        <tr key={user.id}>\n                                            <td>{user.name}</td>\n                                            <td>{user.email}</td>\n                                            <td>{user.birthday.split('-')[2]+'/'+user.birthday.split('-')[1]+'/'+user.birthday.split('-')[0]}</td>\n                                            <td>\n                                                <a onClick={() => this.props.history.push(`/editUser/${user.id}`)}>\n                                                    <div className=\"btn-floating corPadrao darken-4\">\n                                                        <i className=\"material-icons white-text\">edit</i>\n                                                    </div>\n                                                </a>\n                                                &nbsp;\n                                                <a  onClick={() => this.deleteProduct(user.id, user.name)}>\n                                                    <div className=\"btn-floating corPadrao darken-4\">\n                                                        <i className=\"material-icons white-text\">delete</i>\n                                                    </div>\n                                                </a>\n                                            </td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </table>\n                            </div>                        \n                        </div>\n                    </div>\n                </div>\n            </div>\n        }\n    </div>\n    )}\n}\n\nexport default withRouter(Users);"]},"metadata":{},"sourceType":"module"}